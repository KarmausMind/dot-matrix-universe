<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Grok Imagine Fans â€” Dot Matrix Cosmos</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #00ff6a; 
            font-family: 'Courier New', monospace;
            overflow: auto;
            height: 100vh;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        #universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }
        
        #interface {
            position: relative;
            min-height: 100vh;
            z-index: 2;
            /* REMOVED: pointer-events: none - THIS WAS BLOCKING CLICKS! */
            padding: 20px;
        }
        
        .grok-logo {
            position: relative;
            text-align: center;
            margin: 30px 0;
            font-size: clamp(1rem, 4vw, 1.5rem);
            font-weight: bold;
            letter-spacing: 2px;
            pointer-events: none; /* Keep this for text only */
        }
        
        .control-panel {
            position: relative;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 40px auto;
            max-width: 90%;
            /* REMOVED: pointer-events: all - Not needed anymore */
        }
        
        .matrix-btn {
            background: rgba(0, 255, 106, 0.1);
            border: 1px solid #00ff6a;
            color: #00ff6a;
            padding: 12px 20px;
            font-family: 'Courier New', monospace;
            font-size: clamp(0.8rem, 3vw, 1rem);
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            flex: 1;
            min-width: 140px;
            text-align: center;
            /* ADDED: Ensure buttons are clickable */
            pointer-events: auto;
            position: relative;
            z-index: 10;
        }
        
        .matrix-btn:hover {
            background: rgba(0, 255, 106, 0.2);
            box-shadow: 0 0 20px #00ff6a;
            transform: translateY(-2px);
        }
        
        .matrix-btn:active {
            transform: translateY(0);
            background: rgba(0, 255, 106, 0.3);
        }
        
        .mobile-stats {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px auto;
            max-width: 90%;
            pointer-events: none; /* Stats don't need clicks */
        }
        
        .dot-counter, .energy-container {
            font-size: clamp(0.7rem, 3vw, 0.9rem);
            color: #00ff6a;
        }
        
        .energy-bar {
            width: 150px;
            height: 4px;
            background: rgba(0, 255, 106, 0.2);
            overflow: hidden;
            margin-top: 5px;
        }
        
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff6a, #00ccff);
            transition: width 0.3s ease;
        }
        
        .content-area {
            position: relative;
            min-height: 50vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
            pointer-events: none; /* Cosmic entity doesn't need clicks */
        }
        
        .perforations {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Perforations don't need clicks */
            z-index: 3;
        }
        
        .perf-hole {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #000;
            border: 1px solid #00ff6a;
            border-radius: 50%;
        }
        
        .cosmic-entity {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            pointer-events: none;
            z-index: 2;
        }
        
        .entity-core {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #00ff6a, transparent 70%);
            border-radius: 50%;
            filter: blur(10px);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            #interface { padding: 15px; }
            .control-panel { gap: 8px; margin: 30px auto; }
            .matrix-btn { padding: 10px 15px; min-width: 120px; }
            .mobile-stats { flex-direction: column; gap: 15px; text-align: center; }
            .energy-bar { width: 120px; }
        }
        
        @media (max-width: 480px) {
            .control-panel { flex-direction: column; align-items: center; }
            .matrix-btn { width: 200px; min-width: auto; }
            .grok-logo { margin: 20px 0; font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <canvas id="universe"></canvas>
    
    <div id="interface">
        <div class="grok-logo">
            <span>GROK IMAGINE FANS</span><br>
            <span style="font-size: 0.8em;">DOT MATRIX COSMOS</span>
        </div>
        
        <div class="mobile-stats">
            <div class="dot-counter">
                ACTIVE DOTS: <span id="dotCount">0</span>
            </div>
            <div class="energy-container">
                ENERGY LEVEL
                <div class="energy-bar">
                    <div class="energy-fill" id="energyFill"></div>
                </div>
            </div>
        </div>
        
        <div class="content-area">
            <div class="cosmic-entity">
                <div class="entity-core"></div>
            </div>
        </div>
        
        <div class="control-panel">
            <button class="matrix-btn" onclick="toggleMode()">MATRIX MODE</button>
            <button class="matrix-btn" onclick="bigBang()">BIG BANG</button>
            <button class="matrix-btn" onclick="createNebula()">CREATE NEBULA</button>
            <button class="matrix-btn" onclick="resetUniverse()">RESET UNIVERSE</button>
        </div>
        
        <div class="perforations" id="perforations"></div>
    </div>

    <script>
        // ===== DOT MATRIX COSMOS WITH WORKING BUTTONS =====
        class DotMatrixCosmos {
            constructor() {
                this.canvas = document.getElementById('universe');
                this.ctx = this.canvas.getContext('2d');
                this.dots = [];
                this.mode = 'matrix';
                this.energy = 100;
                this.dotCount = 0;
                this.maxDots = 50000;
                
                this.resize();
                this.createPerforations();
                this.init();
                
                window.addEventListener('resize', () => this.resize());
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => this.resize(), 100);
                });
                
                this.animate();
                this.updateEnergyBar();
                
                console.log('ðŸš€ Dot Matrix Cosmos initialized - BUTTONS WORKING!');
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                this.width = this.canvas.width;
                this.height = this.canvas.height;
                this.createPerforations();
            }
            
            createPerforations() {
                const container = document.getElementById('perforations');
                container.innerHTML = '';
                
                const holeSpacing = Math.min(40, this.height / 15);
                
                for (let y = 20; y < this.height; y += holeSpacing) {
                    const hole = document.createElement('div');
                    hole.className = 'perf-hole';
                    hole.style.left = '15px';
                    hole.style.top = y + 'px';
                    container.appendChild(hole);
                    
                    const hole2 = document.createElement('div');
                    hole2.className = 'perf-hole';
                    hole2.style.right = '15px';
                    hole2.style.top = y + 'px';
                    container.appendChild(hole2);
                }
            }
            
            init() {
                this.dots = [];
                for (let i = 0; i < 2000; i++) {
                    this.createDot(true);
                }
                this.updateDotCount();
            }
            
            createDot(initial = false) {
                if (this.dots.length >= this.maxDots) return;
                
                const dot = {
                    x: Math.random() * this.width,
                    y: initial ? Math.random() * this.height : -10,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: Math.random() * 2 + 1,
                    size: Math.random() * 4 + 1,
                    life: 1,
                    maxLife: Math.random() * 200 + 100,
                    color: this.getDotColor(),
                    trail: [],
                    trailLength: Math.floor(Math.random() * 5) + 2
                };
                
                this.dots.push(dot);
                this.dotCount++;
                this.updateDotCount();
            }
            
            getDotColor() {
                const colors = {
                    matrix: ['#00ff6a', '#00ccff', '#ff00aa'],
                    cosmic: ['#ff6a00', '#6a00ff', '#00ffaa'],
                    nebula: ['#ff006a', '#6aff00', '#006aff'],
                    chaos: ['#ffff00', '#ff00ff', '#00ffff']
                };
                const palette = colors[this.mode] || colors.matrix;
                return palette[Math.floor(Math.random() * palette.length)];
            }
            
            updateDots() {
                for (let i = this.dots.length - 1; i >= 0; i--) {
                    const dot = this.dots[i];
                    
                    dot.trail.push({x: dot.x, y: dot.y});
                    if (dot.trail.length > dot.trailLength) {
                        dot.trail.shift();
                    }
                    
                    switch(this.mode) {
                        case 'matrix':
                            dot.x += dot.vx;
                            dot.y += dot.vy;
                            break;
                        case 'cosmic':
                            dot.x += Math.sin(dot.y * 0.01) * 2;
                            dot.y += dot.vy * 0.5;
                            break;
                        case 'nebula':
                            const centerX = this.width / 2;
                            const centerY = this.height / 2;
                            const angle = Math.atan2(dot.y - centerY, dot.x - centerX);
                            dot.x += Math.cos(angle) * 1;
                            dot.y += Math.sin(angle) * 1;
                            break;
                        case 'chaos':
                            dot.x += (Math.random() - 0.5) * 4;
                            dot.y += (Math.random() - 0.5) * 4;
                            break;
                    }
                    
                    dot.life--;
                    
                    if (dot.life <= 0 || dot.y > this.height + 50 || dot.x < -50 || dot.x > this.width + 50) {
                        this.dots.splice(i, 1);
                        this.dotCount--;
                        this.updateDotCount();
                        if (Math.random() < 0.3) this.createDot();
                    }
                }
                
                if (this.dots.length < this.maxDots && Math.random() < 0.1) {
                    this.createDot();
                }
            }
            
            drawDots() {
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                this.ctx.fillRect(0, 0, this.width, this.height);
                
                this.dots.forEach(dot => {
                    const alpha = dot.life / dot.maxLife;
                    
                    dot.trail.forEach((pos, index) => {
                        const trailAlpha = alpha * (index / dot.trailLength) * 0.3;
                        this.ctx.fillStyle = dot.color + Math.floor(trailAlpha * 255).toString(16).padStart(2, '0');
                        this.ctx.beginPath();
                        this.ctx.arc(pos.x, pos.y, dot.size * 0.5, 0, Math.PI * 2);
                        this.ctx.fill();
                    });
                    
                    this.ctx.fillStyle = dot.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
                    this.ctx.beginPath();
                    this.ctx.arc(dot.x, dot.y, dot.size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    if (this.mode !== 'matrix') {
                        this.ctx.shadowColor = dot.color;
                        this.ctx.shadowBlur = 10;
                        this.ctx.fill();
                        this.ctx.shadowBlur = 0;
                    }
                });
            }
            
            animate() {
                this.updateDots();
                this.drawDots();
                requestAnimationFrame(() => this.animate());
            }
            
            // PUBLIC METHODS - NOW WORKING!
            setMode(newMode) {
                this.mode = newMode;
                this.energy = 100;
                this.updateEnergyBar();
                console.log('ðŸ”§ Mode changed to:', newMode);
            }
            
            bigBang() {
                console.log('ðŸ’¥ BIG BANG!');
                for (let i = 0; i < 1000; i++) {
                    setTimeout(() => this.createDot(), Math.random() * 1000);
                }
                this.energy = 30;
                this.updateEnergyBar();
            }
            
            createNebula() {
                console.log('ðŸŒŒ Creating nebula...');
                const centerX = this.width / 2;
                const centerY = this.height / 2;
                
                for (let i = 0; i < 500; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 300;
                    const dot = {
                        x: centerX + Math.cos(angle) * distance,
                        y: centerY + Math.sin(angle) * distance,
                        vx: Math.cos(angle + Math.PI/2) * 2,
                        vy: Math.sin(angle + Math.PI/2) * 2,
                        size: Math.random() * 3 + 1,
                        life: 300,
                        maxLife: 300,
                        color: this.getDotColor(),
                        trail: [],
                        trailLength: 8
                    };
                    this.dots.push(dot);
                    this.dotCount++;
                }
                this.updateDotCount();
                this.energy = 50;
                this.updateEnergyBar();
            }
            
            resetUniverse() {
                console.log('ðŸ”„ Resetting universe...');
                this.dots = [];
                this.dotCount = 0;
                this.updateDotCount();
                this.energy = 100;
                this.updateEnergyBar();
                this.init();
            }
            
            updateDotCount() {
                document.getElementById('dotCount').textContent = this.dotCount.toLocaleString();
            }
            
            updateEnergyBar() {
                document.getElementById('energyFill').style.width = this.energy + '%';
            }
        }

        // ===== INITIALIZE & GLOBAL FUNCTIONS =====
        const cosmos = new DotMatrixCosmos();

        let currentMode = 0;
        const modes = ['matrix', 'cosmic', 'nebula', 'chaos'];
        
        function toggleMode() {
            currentMode = (currentMode + 1) % modes.length;
            cosmos.setMode(modes[currentMode]);
            document.querySelectorAll('.matrix-btn')[0].textContent = modes[currentMode].toUpperCase() + ' MODE';
        }
        
        function bigBang() {
            cosmos.bigBang();
        }
        
        function createNebula() {
            cosmos.createNebula();
        }
        
        function resetUniverse() {
            cosmos.resetUniverse();
        }

        // ===== INTERACTIVE FEATURES =====
        document.addEventListener('mousemove', (e) => {
            if (Math.random() < 0.3) {
                const dot = {
                    x: e.clientX,
                    y: e.clientY,
                    vx: (Math.random() - 0.5) * 4,
                    vy: (Math.random() - 0.5) * 4,
                    size: Math.random() * 2 + 1,
                    life: 60,
                    maxLife: 60,
                    color: '#ffffff',
                    trail: [],
                    trailLength: 3
                };
                cosmos.dots.push(dot);
                cosmos.dotCount++;
                cosmos.updateDotCount();
            }
        });

        console.log('âœ… All buttons are now clickable! Try them!');
    </script>
</body>
</html>
